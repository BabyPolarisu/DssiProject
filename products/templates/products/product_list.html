{% extends 'base.html' %}
{% load humanize %}

{% block title %}‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î - UniMarket{% endblock %}

{% block content %}
<div class="grid grid-cols-1 lg:grid-cols-4 gap-8 max-w-7xl mx-auto py-8 px-4">

    <aside class="lg:col-span-1">
        <div class="bg-white p-6 rounded-xl shadow-md sticky top-24 border border-gray-100">
            <h2 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2">
                <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg>
                ‡∏Å‡∏£‡∏≠‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
            </h2>
            
            <form method="GET" action="{% url 'product_list' %}">
                {% if request.GET.q %}
                    <input type="hidden" name="q" value="{{ request.GET.q }}">
                {% endif %}

                <div class="space-y-6">
                    
                    <div>
                        <h3 class="text-sm font-semibold text-gray-700 mb-2">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</h3>
                        <div class="space-y-1">
                            <select name="category" class="w-full border-gray-300 rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500">
                                <option value="">‡∏ó‡∏∏‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</option>
                                <option value="1" {% if request.GET.category == '1' %}selected{% endif %}>üìö ‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</option>
                                <option value="2" {% if request.GET.category == '2' %}selected{% endif %}>üíª ‡∏≠‡∏¥‡πÄ‡∏•‡πá‡∏Å‡∏ó‡∏£‡∏≠‡∏ô‡∏¥‡∏Å‡∏™‡πå</option>
                                <option value="3" {% if request.GET.category == '3' %}selected{% endif %}>üëï ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏á‡∏Å‡∏≤‡∏¢</option>
                                <option value="4" {% if request.GET.category == '4' %}selected{% endif %}>üëü ‡∏£‡∏≠‡∏á‡πÄ‡∏ó‡πâ‡∏≤</option>
                                <option value="5" {% if request.GET.category == '5' %}selected{% endif %}>üíç ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏î‡∏±‡∏ö</option>
                                <option value="6" {% if request.GET.category == '6' %}selected{% endif %}>üõãÔ∏è ‡∏Ç‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏´‡∏≠</option>
                                <option value="7" {% if request.GET.category == '7' %}selected{% endif %}>üìù ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</option>
                                <option value="8" {% if request.GET.category == '8' %}selected{% endif %}>üí™üèª ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢</option>
                            </select>
                        </div>
                    </div>

                    <div>
                        <h3 class="text-sm font-semibold text-gray-700 mb-2">‡∏™‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h3>
                        <select name="condition" class="w-full border-gray-300 rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500">
                            <option value="">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                            <option value="new" {% if request.GET.condition == 'new' %}selected{% endif %}>‡∏°‡∏∑‡∏≠‡∏´‡∏ô‡∏∂‡πà‡∏á (New)</option>
                            <option value="used" {% if request.GET.condition == 'used' %}selected{% endif %}>‡∏°‡∏∑‡∏≠‡∏™‡∏≠‡∏á (Used)</option>
                        </select>
                    </div>

                    {% comment %} <div>
                        <h3 class="text-sm font-semibold text-gray-700 mb-2">‡∏ä‡πà‡∏ß‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏ö‡∏≤‡∏ó)</h3>
                        <div class="flex items-center gap-2">
                            <input type="number" name="min_price" placeholder="‡∏ï‡πà‡∏≥‡∏™‡∏∏‡∏î" value="{{ request.GET.min_price }}" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500">
                            <span class="text-gray-400">-</span>
                            <input type="number" name="max_price" placeholder="‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î" value="{{ request.GET.max_price }}" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500">
                        </div>
                    </div> {% endcomment %}

                    <div class="pt-2">
                        <button type="submit" class="w-full bg-blue-600 text-white py-2.5 rounded-lg font-semibold hover:bg-blue-700 transition shadow-sm">
                            ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
                        </button>
                        <a href="{% url 'product_list' %}" class="block text-center text-sm text-gray-500 mt-3 hover:text-red-500 transition">
                            ‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á
                        </a>
                    </div>
                </div>
            </form>
        </div>
    </aside>

    <main class="lg:col-span-3">
        <div class="mb-6 flex justify-between items-end">
            <div>
                <h1 class="text-3xl font-bold text-gray-800">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h1>
                <p class="text-gray-500 mt-1">
                    ‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ {{ products|length }} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
                </p>
            </div>
        </div>

        {% if products %}
            <div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6">
                {% for product in products %}
                    {% include 'partials/product_card.html' %}
                {% endfor %}
            </div>
        {% else %}
            <div class="bg-white rounded-xl p-12 text-center border border-dashed border-gray-300">
                <div class="w-20 h-20 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4">
                    <svg class="w-10 h-10 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                </div>
                <h3 class="text-xl font-bold text-gray-800 mb-2">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ï‡∏≤‡∏°‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç</h3>
                <p class="text-gray-500">‡∏•‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏≥‡∏≠‡∏∑‡πà‡∏ô‡∏î‡∏π‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö</p>
                <a href="{% url 'product_list' %}" class="inline-block mt-6 px-6 py-2 bg-gray-100 text-gray-700 font-medium rounded-full hover:bg-gray-200 transition">
                    ‡∏î‡∏π‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                </a>
            </div>
        {% endif %}
    </main>

</div>
{% endblock %}